#!/bin/sh

# WARNING: Do not edit this file.
# It was generated by processing {{ yadm.source }}

# load xresources
xrdb -load "$HOME/.config/X11/xresources"

# pass DISPLAY variable to systemctl
systemctl --user import-environment DISPLAY

# enable lockscreen
{% if yadm.class ==  "laptop" %}
xss-lock -- "$HOME/.local/bin/lock-screen" &
{% endif %}

# start compositor
mkdir -p "$HOME/.local/var/log/picom"
{% if yadm.class == "laptop" %}
PICOM_FLAGS="-Cb"
{% else %}
PICOM_FLAGS="-fCb -D8"
{% endif %}

picom $PICOM_FLAGS > "$HOME/.local/var/log/picom/picom.log"

# start ibus
export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
mkdir -p "$HOME/.local/var/log/ibus"
ibus-daemon --xim &

# start wm
mkdir -p "$HOME/.local/var/log/i3"
exec i3 > "$HOME/.local/var/log/i3/i3.log"
